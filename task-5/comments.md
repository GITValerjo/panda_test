Для решения проблемы утечки памяти можно использовать слабые ссылки, чтобы не увеличивать счётчик ссылок.

while (1) {
    my $a = { b => {} };
    $a->{b}{a} = $a;  # Создаем перекрестную ссылку
    weaken($a->{b}{a});  # Делаем ссылку слабой
}

Слабые ссылки часто используются для реализации кэшей, где объекты автоматически удаляются, если на них больше нет сильных ссылок.
Слабые ссылки позволяют создавать временные связи между объектами, которые автоматически удаляются, если объект больше не используется.

Вывод в консоль скрипта:
$ ./weaken_ref_save_memory.pl
Before undef:
object1 exists: yes
object2 exists: yes
After undef:
object1 exists: no
object2 exists: no
